
<h3>Theory</h3>
<p>
	Interrupts are one of the most aptly-named concepts in operating systems. They do just that. Interrupt the CPU when needed. Although modern CPUs are very powerful, it is one of the most sought after resources in the system. Therefore, it needs to be extremely efficient. The job of interrupt is to make the CPU more efficient.
</p>

<p>
	The predecessor to interrupts in CPU was polling. Say a user program needs input from the hard-disk. Since the difference in speed between CPU and hard-disk is too much, the CPU will needlessly spend too much of its cycles checking for the status of the hard-disk. Interrupt basically inverted the concerns. The hard-disk now has the responsibility of notifying the CPU when its status changes. The CPU can execute other programs more efficiently. Interrupts hugely increased the efficiency of CPUs.
</p>
<p>
	So let us formally define what an interrupt is. An Interrupt is a signal by an external entity (I/O hardware, DMA, etc.) that it needs the CPU's imminent attention. This can happen for a variety of reasons. For example, it can happen when the user strokes a key on the keyboard, when there is a power failure (There will be some CPU cycles left before it completely shuts down, and it is used to perform some critical memory operations). The list is endless. Interrupts have the highest priority in a CPU. Whenever an interrupt occurs, the CPU finishes the current instruction and immediately jumps to service the interrupt after saving the current processor state. Interrupts can be classified based on many parameters.

	<ul>
		<li>Maskability- Interrupts are maskable/non-maskable. If an interrupt is maskable, the CPU can choose to ignore its occurrence when it occurs. These are relatively low-priority interrupts. Non-maskable interrupts are those which cannot be ignored by the CPU. </li>
		<li>Source of Interrupts- Interrupts can originate either from hardware or software. Hardware interrupts are wired to the CPU and send a signal directly to the dedicated CPU Interrupt pin. Software interrupts are those that are generated by the user software for obtaining any required services of the Operating System. </li>
		<li>ISR Address- There are two types of interrupts here. Vectored or Non-vectored Interrupts. Vectored interrupts are those that have a pre-defined address in which the Interrupt Service Routine is stored. Non-vectored interrupts are those in which the address is provided by the program that is raising the interrupt.</li>
	</ul>
</p>
<p>
	Let us see how the CPU responds to an interrupt. Here are steps that happen when the interrupt is raised in the system. 
	<ol>
		<li>
			CPU clears the Interrupt line and raises the Interrupt Acknowledgement
		</li>
		<li>Using the pointer to the current Process Control Block, the Context for the currently-executing process is saved.</li>
		<li>The CPU mode bit is switched to Supervisory mode.</li>
		<li>Using the address given as the parameter or from the Interrupt Vector Table, the Program Counter acts as pointer to the first instruction of the Interrupt Service Routine.</li>
		<li>Processing is switched to the appropriate portion of the kernel.</li>
		<li>After Interrupt is executed, the Process Control Block of previously executing process is loaded into the memory and its execution is resumed.</li>
	</ol>
</p>
<p>
	Interrupts have different priorities among themselves. For example, a power-failure interrupt has a de-facto higher priority than I/O interrupt. There are many ways in which priorities in interrupts are implemented and are beyond the scope of this article. In a simplified way, a higher priority interrupt treats a lower priority interrupt in the same way any interrupt treats a process in CPU.
</p>

<h3>References</h3>
<hr>
<ol>
	<li>
		<a href="https://www.youtube.com/watch?v=xRaApI85Zqo&list=PL3-wYxbt4yCjpcfUDz-TgD_ainZ2K3MUZ&index=15">W4 L1 Interrupts</a>
	</li>
	<li>
		<a href="https://www.youtube.com/watch?v=1M5qXXlap0U&list=PL3-wYxbt4yCjpcfUDz-TgD_ainZ2K3MUZ&index=16">W4 L2 Interrupt Handling</a>
	</li>
    <li>Operating System Concepts - by Silberschatz, Galvin, Gagne</li>
</ol>
<br>